<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prompt Privacy Tool</title>
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div class="logo">
        <img src="img/logo.svg" alt="Prompt Privacy Tool" class="logo-image">
        <h1>Prompt Privacy Tool</h1>
      </div>
      <div class="header-controls">
        <button id="help-btn" class="btn btn-icon" title="Help">
          <i class="icon-help"></i>
        </button>
      </div>
    </header>

    <main class="app-main prompt-focused">
      <div class="content centered-content">
        <div class="main-container">
          <div class="intro-section">
            <h2>Protect your text before sending to AI</h2>
            <p>Paste your text below to redact sensitive information before using it in AI prompts</p>
          </div>
          
          <div class="input-output-container">
            <div class="text-input-section">
              <div class="section-header">
                <h3>Your Text</h3>
                <div class="section-actions">
                  <button id="clear-text-btn" class="btn btn-sm btn-outline">Clear</button>
                  <button id="example-btn" class="btn btn-sm btn-outline">Load Example</button>
                </div>
              </div>
              <div class="textarea-container">
                <textarea id="paste-text" class="form-control text-area" placeholder="Paste text containing sensitive information you want to redact before sending to AI tools..."></textarea>
              </div>
              <div class="protection-options">
                <div class="protection-levels">
                  <h4>Protection Level</h4>
                  <div class="protection-level-selector">
                    <label class="level-option">
                      <input type="radio" name="protection-level" value="standard" checked>
                      <span>Standard</span>
                      <div class="level-tooltip">Redacts common PII like names, emails, phone numbers, addresses</div>
                    </label>
                    <label class="level-option">
                      <input type="radio" name="protection-level" value="high">
                      <span>High</span>
                      <div class="level-tooltip">Adds redaction for financial info, dates, organization names</div>
                    </label>
                    <label class="level-option">
                      <input type="radio" name="protection-level" value="maximum">
                      <span>Maximum</span>
                      <div class="level-tooltip">Redacts all sensitive data including potential identifiers and locations</div>
                    </label>
                  </div>
                </div>
                <div class="custom-terms-section">
                  <div class="custom-terms-header">
                    <h4>Custom Terms to Redact</h4>
                    <button id="add-term-btn" class="btn btn-sm btn-outline">Add Term</button>
                  </div>
                  <div class="custom-terms-list" id="custom-terms-list">
                    <div class="custom-term-entry">
                      <input type="text" class="form-control custom-term-input" placeholder="Enter custom term">
                      <button class="remove-term-btn">×</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="process-actions">
                <button id="quick-redact-btn" class="btn btn-success">Quick Redact</button>
                <button id="process-paste-btn" class="btn btn-primary">Redact with Options</button>
              </div>
            </div>

            <div class="text-output-section">
              <div class="section-header">
                <h3>Redacted Text</h3>
                <div class="section-actions">
                  <button id="copy-redacted-btn" class="btn btn-sm btn-outline">Copy to Clipboard</button>
                </div>
              </div>
              <div class="textarea-container">
                <textarea id="redacted-text" class="form-control text-area" placeholder="Your redacted text will appear here..." readonly></textarea>
              </div>
              <div class="redaction-summary" id="redaction-summary">
                <div class="summary-title">Redaction Summary</div>
                <div class="summary-stats">
                  <div class="stat-item">
                    <span class="stat-value" id="total-redactions">0</span>
                    <span class="stat-label">Redactions</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value" id="protected-categories">0</span>
                    <span class="stat-label">Categories</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value" id="protection-score">0%</span>
                    <span class="stat-label">Protected</span>
                  </div>
                </div>
              </div>
              <div class="redaction-actions">
                <div class="destination-options">
                  <label for="destination-select">Send To:</label>
                  <select id="destination-select" class="form-control">
                    <option value="clipboard">Clipboard</option>
                    <option value="claude">Claude</option>
                    <option value="chatgpt">ChatGPT</option>
                    <option value="gemini">Gemini</option>
                  </select>
                </div>
                <button id="send-to-ai-btn" class="btn btn-primary">Send to AI</button>
              </div>
            </div>
          </div>
          
          <div class="redaction-details" id="redaction-details">
            <div class="details-header">
              <h3>Redaction Details</h3>
              <button id="close-details-btn" class="btn-close">×</button>
            </div>
            <div class="redactions-list-container">
              <div class="redactions-filters">
                <select id="redaction-filter" class="form-control">
                  <option value="all">All Redactions</option>
                  <option value="personal">Personal Info</option>
                  <option value="financial">Financial Info</option>
                  <option value="contact">Contact Details</option>
                  <option value="custom">Custom Terms</option>
                </select>
              </div>
              <ul class="redactions-list" id="redactions-list">
                <!-- Redactions will be listed here -->
                <li class="redaction-item">
                  <div class="redaction-item-info">
                    <span class="redaction-type">Email</span>
                    <span class="redaction-text">john.doe@example.com</span>
                  </div>
                  <div class="redaction-item-actions">
                    <button class="restore-btn" title="Restore">Restore</button>
                  </div>
                </li>
                <li class="redaction-item">
                  <div class="redaction-item-info">
                    <span class="redaction-type">Phone</span>
                    <span class="redaction-text">555-123-4567</span>
                  </div>
                  <div class="redaction-item-actions">
                    <button class="restore-btn" title="Restore">Restore</button>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="app-footer">
      <div class="status-bar">
        <div id="pyodide-status" class="status-item">
          <i class="icon-loading"></i>
          <span>Initializing...</span>
        </div>
      </div>
      <div class="footer-info">
        <p>Prompt Privacy Tool - All processing happens in your browser</p>
      </div>
    </footer>
  </div>

  <!-- Modal for custom term -->
  <div class="modal hidden" id="custom-term-modal" style="display: none;" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Add Custom Term</h3>
        <button class="btn-close" id="custom-term-modal-close">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="custom-term">Term to Redact</label>
          <input type="text" id="custom-term" class="form-control" placeholder="Enter text to redact">
          <div class="help-text">This text will be replaced with [REDACTED] whenever it appears</div>
        </div>
        <div class="form-group">
          <label for="custom-replacement">Replacement Text (Optional)</label>
          <input type="text" id="custom-replacement" class="form-control" placeholder="e.g., [COMPANY]">
          <div class="help-text">Custom label for this redacted content</div>
        </div>
        <div class="form-actions">
          <button id="add-custom-term-btn" class="btn btn-primary">Add Term</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Custom redaction style modal -->
  <div class="modal hidden" id="redact-options-modal" style="display: none;" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Redaction Options</h3>
        <button class="btn-close" id="redaction-options-close">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="redaction-style">Redaction Style</label>
          <select id="redaction-style" class="form-control">
            <option value="type-label">Type Labels ([EMAIL], [PHONE])</option>
            <option value="generic">Generic Label ([REDACTED])</option>
            <option value="black-box">Black Box (█████████)</option>
            <option value="character">Character Replacement (XXXXX)</option>
          </select>
        </div>
        
        <div class="protection-categories">
          <h4>Information to Protect</h4>
          
          <div class="category-section">
            <div class="category-header">
              <input type="checkbox" id="personal-info" checked>
              <label for="personal-info">Personal Information</label>
            </div>
            <div class="category-items">
              <div class="category-item">
                <input type="checkbox" id="names" checked>
                <label for="names">Names</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="dates" checked>
                <label for="dates">Dates</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="ids" checked>
                <label for="ids">ID Numbers</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="gender" checked>
                <label for="gender">Gender/Age</label>
              </div>
            </div>
          </div>
          
          <div class="category-section">
            <div class="category-header">
              <input type="checkbox" id="contact-info" checked>
              <label for="contact-info">Contact Information</label>
            </div>
            <div class="category-items">
              <div class="category-item">
                <input type="checkbox" id="emails" checked>
                <label for="emails">Email Addresses</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="phones" checked>
                <label for="phones">Phone Numbers</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="addresses" checked>
                <label for="addresses">Physical Addresses</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="usernames" checked>
                <label for="usernames">Usernames/Handles</label>
              </div>
            </div>
          </div>
          
          <div class="category-section">
            <div class="category-header">
              <input type="checkbox" id="financial-info" checked>
              <label for="financial-info">Financial Information</label>
            </div>
            <div class="category-items">
              <div class="category-item">
                <input type="checkbox" id="credit-card" checked>
                <label for="credit-card">Credit Card Numbers</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="bank-accounts" checked>
                <label for="bank-accounts">Bank Accounts</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="monetary" checked>
                <label for="monetary">Monetary Values</label>
              </div>
            </div>
          </div>
          
          <div class="category-section">
            <div class="category-header">
              <input type="checkbox" id="location-info" checked>
              <label for="location-info">Location Information</label>
            </div>
            <div class="category-items">
              <div class="category-item">
                <input type="checkbox" id="locations" checked>
                <label for="locations">Locations/Places</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="ip-addresses" checked>
                <label for="ip-addresses">IP Addresses</label>
              </div>
              <div class="category-item">
                <input type="checkbox" id="coordinates" checked>
                <label for="coordinates">GPS Coordinates</label>
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-actions">
          <button id="options-cancel-btn" class="btn btn-outline">Cancel</button>
          <button id="options-apply-btn" class="btn btn-primary">Apply & Redact</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Scripts -->
  <script type="module" src="js/app.js"></script>
  
  <!-- Status message container -->
  <div id="status-message" class="status-message"></div>
</body>
</html>